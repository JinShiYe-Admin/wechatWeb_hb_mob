webpackJsonp([1],{"+tDm":function(e,t){},"1+z2":function(e,t,s){"use strict";function a(e){s("vrS7")}var n=s("hC5p"),i=s("y7Xq"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-e8f9e94a",null);t.a=l.exports},"1ooo":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.classes,function(t,a){return s("div",[s("p",[s("span"),e._v(e._s(t.className))]),e._v(" "),s("div",e._l(t.readPersons,function(t,a){return s("div",[s("img",{attrs:{src:t.url}}),e._v(" "),s("p",[e._v(e._s(t.name))])])}))])}))},n=[],i={render:a,staticRenderFns:n};t.a=i},"2Nak":function(e,t,s){"use strict";var a=s("c/Tr"),n=s.n(a),i=s("mvHQ"),o=s.n(i),r=s("YaEn"),l=s("31dE");t.a={name:"extra-file",props:{msgType:{type:Number,default:2},uploadFiles:{type:Array,default:function(){return[]}}},beforeRouteLeave:function(e,t,s){document.getElementById("uploaderInput").value="undefined"},data:function(){return{toastContent:"",showGallery:!1,showImages:[],isUploading:!1}},mounted:function(){},created:function(){},watch:{msgType:function(e){console.log("extraFile.vue获取的nmsgType newVal:"+e)},uploadFiles:function(e,t){console.log("文件数组已改变："+o()(e)),this.showImages=[];for(var s in e)this.getBackImg(e[s])}},methods:{getBackImg:function(e){var t=this;switch(this.msgType){case 1:case 2:case 3:this.showImages.push(e.fileurl);break;case 5:console.log("extraFile为视频"),l.a.getVideoCover(e.fileurl,function(e){t.showImages.push(e)})}},previewImage:function(e){console.log("选择后的文件点击事件"),1!==this.msgType&&2!==this.msgType&&3!==this.msgType||r.a.push({name:"image-preview",params:{index:parseInt(e)}})},getAcceptType:function(){var e=void 0;switch(this.msgType){case 0:e="添加文字";break;case 1:case 2:case 3:e="image/jpeg,image/png";break;case 4:e="audio/AMR";break;case 5:e="video/mp4";break;case 6:e=""}return e},selectFile:function(e){if(e.target.value){console.log("选中的文件路径："+e.target.value),console.log(e.target.files);var t=e.target.files;if(t.length>9-this.uploadFiles.length)return void this.$emit("showToast","请确保附件总数不多于9张");var s=e.target.files[0];if(""===s.type)return;if(!this.isCurType(s))return void this.$emit("showToast","所选文件类型错误");if(!this.isInSize(s))return void this.$emit("showToast",this.toastContent);this.uploadFile(t,e.target)}},uploadFile:function(e,t){var s=this;switch(s.isUploading=!0,this.$emit("isUploading",s.isUploading),this.msgType){case 1:case 2:case 3:var a=0,i=[];n()(e).forEach(function(n,o){s.uploadImage(n,o,function(n,o){a++,i[n]=o,a===e.length&&(s.isUploading=!1,s.$emit("isUploading",s.isUploading),s.$emit("uploadFiles",i),t.value="")})});break;case 4:case 5:case 6:var r=new FormData;r.append("file",file),l.a.postFile(r,function(e){console.log("已上傳的文件！"+o()(e)),"0000"===e.RspCode?s.$emit("uploadFile",e.RspData):console.log("发生错误！"+o()(e))})}},uploadImage:function(e,t,s){var a=this;l.a.uploadImg(e,2,function(e){console.log("已上傳的文件！"+o()(e)),"0000"===e.RspCode?s(t,e.RspData):(a.isUploading=!1,a.$emit("isUploading",a.isUploading),a.$emit("showToast","上传失败，请重新上传"),console.log("发生错误！"+o()(e)))})},isCurType:function(e){switch(console.log("****extraFile****选中文件的类型:"+e.type),this.msgType){case 1:case 2:case 3:return"image/jpeg"===e.type||"image/png"===e.type;case 4:return"audio/AMR"===e.type;case 5:return"video/mp4"===e.type;case 6:return!0;default:return!1}},isInSize:function(e){if(e.size<=5)return this.toastContent="请确保文件大于5字节",!1;switch(this.msgType){case 4:return this.toastContent="请确保文件小于2M",e.size<2097152;case 5:case 6:return this.toastContent="请确保文件小于4M",e.size<4194304;default:return!0}}}}},"2ZmM":function(e,t,s){"use strict";t.a={name:"read-list",props:{msgInfo:{type:Object}},data:function(){return{classes:[]}},created:function(){this.requestList()},watch:{},methods:{requestList:function(){}}}},"31dE":function(e,t,s){"use strict";s.d(t,"a",function(){return r});var a=s("mvHQ"),n=s.n(a),i=s("FjHR"),o=s("vLgD"),r={uploadImg:function(e,t,s){t=1024*t*1024,console.log("要处理的图片地址："+e.name),this.getFileReader(e,t,s)},getFileReader:function(e,t,s){var a=this,i=new FileReader;i.onload=function(){var i=this.result,o=new FormData;a.getImgInfo(i,function(r,l){if(console.log("获取的文件信息："+n()(l)),console.log("原图尺寸："+i.length),i.length>t){var c=a.getCanvasDataUrl(r,a.getSuitableSize(l,Math.ceil(i.length/t))),u=a.base64ToBlob(c,"image/jpeg");console.log("blob.type:"+u.type),console.log("要传递的文件大小："+u.size),o.append("image",u,Date.now()+".jpg")}else o.append("image",e);a.postFile(o,s)})},i.readAsDataURL(e)},postFile:function(e,t){console.log("开始上传"),o.a.postData(i.a.UPLOADURL,e,t)},getCanvasDataUrl:function(e,t){console.log("*****重绘图片的宽高******");var s=document.createElement("canvas");return s.width=t.width,s.height=t.height,s.getContext("2d").drawImage(e,0,0,t.width,t.height),s.toDataURL("image/jpeg",.7)},getSuitableSize:function(e,t){return e.width=e.width/t,e.height=e.height/t,console.log("获取的图片要裁剪的尺寸："+n()(e)),e},getImgInfo:function(e,t){var s=new Image,a={};s.onload=function(){console.log(s),a.width=s.naturalWidth,a.height=s.naturalHeight,console.log("获取的图片宽高："+n()(a)),t(s,a)},s.src=e},base64ToBlob:function(e,t){for(var s=e.replace(/^data:image\/(png|jpeg|jpg);base64,/,""),a=window.atob(s),n=[],i=0,o=a.length;i<o;i+=1024){for(var r=a.slice(i,i+1024),l=new Array(r.length),c=0;c<r.length;c++)l[c]=r.charCodeAt(c);var u=new Uint8Array(l);n.push(u)}return console.log("文件类型："+t),new Blob(n,{type:t})},getVideoCover:function(e,t){var s=this,a=document.createElement("video");a.addEventListener("loadeddata",function(){t(s.captureImage(a))}),a.src=e},captureImage:function(e){var t={width:e.videoWidth,height:e.videoHeight};return console.log("compress获取的视频宽高："+n()(t)),this.getCanvasDataUrl(e,t)}}},"6Ldw":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-flex"},e._l(e.msgBanners,function(t,a){return s("div",{staticClass:"weui-flex__item",class:[{active:a===e.activeIndex}],on:{click:function(s){e.bannerClick(a,t)}}},[s("div",{staticClass:"placeholder"},[e._v(e._s(t.content))])])}))},n=[],i={render:a,staticRenderFns:n};t.a=i},"6oqw":function(e,t,s){"use strict";var a=s("EF91");t.a={name:"msg-detail",props:["msgId"],components:{replyList:a.a},data:function(){return{}},methods:{}}},"7biW":function(e,t,s){"use strict";function a(e){s("mAnT")}var n=s("CNvo"),i=s("YCFt"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,null,null);t.a=l.exports},"7mNt":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("search"),e._v(" "),s("msg-banner"),e._v(" "),s("msg-list")],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},"7tlc":function(e,t,s){"use strict";var a=s("2ZmM"),n=s("1ooo"),i=s("VU/8"),o=i(a.a,n.a,null,null,null);t.a=o.exports},"8SfJ":function(e,t,s){"use strict";function a(e){s("InRP")}var n=s("pqQu"),i=s("7mNt"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,null,null);t.a=l.exports},"8uh7":function(e,t){},"8wv8":function(e,t,s){"use strict";function a(e){s("lUzY")}var n=s("StER"),i=s("IQ2I"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-36bbbdb7",null);t.a=l.exports},"92vA":function(e,t,s){"use strict";var a=s("mvHQ"),n=s.n(a),i=s("ifoU"),o=s.n(i),r=s("FjHR"),l=s("VKKs");t.a={name:"choose-container",props:{chosePersons:{type:o.a,default:function(){return new o.a}},choseDeparts:{type:o.a,default:function(){return new o.a}}},data:function(){return{selectedPersons:l.a.getSessionMap(r.a.KEY_CHOOSE_PERSONS),selectedDeparts:l.a.getSessionMap(r.a.KEY_CHOOSE_DEPARTS),choseSize:0,chooseType:0}},created:function(){console.log("choose-container当前路由的路由名称："+this.$route.name),console.log("choose-container当前路由参数："+n()(this.$route.params)),"depart-person"===this.$route.name?(this.chooseType=0,this.choseSize=this.selectedPersons.size):(this.chooseType=1,this.choseSize=this.selectedDeparts.size)},watch:{selectedPersons:function(e,t){this.choseSize=e.size},selectedDeparts:function(e,t){this.choseSize=e.size}},methods:{chooseDepartsPersons:function(){0===this.chooseType?this.$emit("chosePersons",this.selectedPersons):this.$emit("choseDeparts",this.selectedDeparts),this.routerToPub()},routerToPub:function(){var e=this.$route.params.path.split("-").length;console.log("@@@@@com-persen@@@@@导向发布页面position"+e),this.$router.go(-parseInt(e))},getChosePersons:function(e){console.log("choose-container获取的已选人员Map："+n()(e)),this.selectedPersons=e},getChoseDeparts:function(e){console.log("choose-container获取的已选部门Map:"+n()(e)),this.selectedDeparts=e},isBottomMargin:function(){if(0===this.chooseType){if(this.chosePersons.size>0)return!0;if(this.selectedPersons.size>0)return!0}else{if(this.choseDeparts.size>0)return!0;if(this.selectedDeparts.size>0)return!0}return!1}}}},"93kB":function(e,t,s){"use strict";var a=s("sPQq"),n=s("ZbU0"),i=s("VU/8"),o=i(a.a,n.a,null,null,null);t.a=o.exports},"A+8S":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAMAAAC7m5rvAAAAllBMVEUAAAC/v7+qqqrHx8evr6/ExMS5ubmxsbGsrKysrKytra2pqam8vLy9vb2lpaXExMT////s7Oz8/Pz09PTu7u729vb5+fnp6enMzMzLy8vm5ub4+Pjj4+O3t7fx8fHb29vAwMDHx8ePj4/S0tLf39+rq6ulpaWSkpK7u7vY2NjR0dGnp6eenp6ampqysrLPz8+fn5+ioqKXtObzAAAAEHRSTlMA6wT4/e/f0KyZSy/z8mz4uKbH2gAAA6FJREFUSMellody2zAMhuXEGU6TVBgkbGp529np+79cKREUpbrxdfxnn7g+cYACkKku7m5vricPl4v5Yq5arWLJN14+TK5vbu8udLhCsyuHeY6QD0Q0rEHb765mA/DbJIw4j4XGybdIPV5q13lMC9NHnWvKpxhiAVBYPMX4ezffxSQnHmFoahFgkRpEmHCEMeWTdn8zygOnmAVhkxZZ1AImYdyOnvnJrrohrBiymF/3ZgGsYty1XV1kdy6MATKGnJRgoiAVuRRH/inhTe4uu9U1Q8MMmy0nOcdJ5bMwbEs9g9vsJg8yjq2UXxugdJYBtHKTXUeM64bO2c00bGP/dTbBIAIBERyIaFgTASHQyiS7hyC3KaHcQNSm2r2+vbwvBFRt91OjlfssXizZ+q2WjN3yqvXrcfWxmS/362lYGJfYjQm6zBah4InWbtRyy3UlGPaGvDxU6B8EvqVo9NgX2TwUGDosJzb7vQyPBHafxNSZ2zq9hXOdzYoJWM6Hyo5P0h4PkAcMwI5mAxOx/bvgGEOpfqBihoezoeSKLffWAA4xBLIvS8VywYR5RjFaix8PmDBs77+sa8XYDDA2ilVV9xbAiCF0cFUpZniASa6Yn0y5aICO8tMplkvCMGKbV8x7jqhbYSf8fI4YJgwUq46+FjmillIdK8UgYQUrtlvliaspUflqpxgXHbYiIhD/d77w+kG9oGkg1T5eiYhLImkbV2PsbUO96qcnStq8jbCwyFoX+TJPjhK8kpucv+gi66LfmwXF3peJMkQmcct3xcCeGmCxx55qDdBzuF8kA5yYW9bcUy3Wc7x2p+bOuQgYTJdKxctVBG65g4AVMMCoVgwOECjFlOMDKFbTbz+camcRilwxvS84rX79cPQztYrh51HM+DMtZPmGilkYOQUDiuX1iVPA44F7p2DGLghYZwP+8SJDjKdvADqbg+SCOtmyw9p94anDKwCDw7Pq8JJ7LduTga69rtaf0b3uIJyneAySe32AIPdc+r8D1bM6c23oulzvzB9S6BDnf1+HDifkUugYBCrT1OcCVd1QClQpLALQubDoHAGlsBiDMG3J0pMUthdzKhfw5LtLiUE4hnx0AgDNtnEQVZYQ5XyHf8jWasjXBAPBxgQDziQYFqwmGNmMlIrpDH+ZzihHs5A8+co4eeKUPEFKngKHIXnKvn0H++epmoWppoaP079JDL8//lsa+p9Jb0qx77sUexG0WmmhS7HvRyn2TxZ1zUyK+LY0AAAAAElFTkSuQmCC"},AU0D:function(e,t,s){"use strict";function a(e){s("8uh7")}var n=s("m/Ef"),i=s("zSUU"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,null,null);t.a=l.exports},BRbc:function(e,t){},CNvo:function(e,t,s){"use strict";t.a={name:"search",data:function(){return{}},created:function(){$(function(){function e(){n.val("")}function t(){e(),s.removeClass("weui-search-bar_focusing"),a.show()}var s=$("#searchBar"),a=$("#searchText"),n=$("#searchInput"),i=$("#searchClear"),o=$("#searchCancel");a.on("click",function(){s.addClass("weui-search-bar_focusing"),n.focus()}),n.on("blur",function(){this.value.length||t()}).on("input",function(){this.value.length}),i.on("click",function(){e(),n.focus()}),o.on("click",function(){t(),n.blur()})})},methods:{}}},EF91:function(e,t,s){"use strict";function a(e){s("yrVV")}var n=s("ZqH5"),i=s("r6xv"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,null,null);t.a=l.exports},FjHR:function(e,t,s){"use strict";s.d(t,"a",function(){return a});var a={MAINURL:"https://jsypay.jiaobaowang.net/wxth/appschweb/schwebapi.aspx",CONFIGURL:"https://jsypay.jiaobaowang.net/wxth/jssdkapi.aspx",UPLOADURL:"https://jsypay.jiaobaowang.net/wxth/appschweb/FileUpLoad.ashx",KEY_DEPARTS:"key-departments",KEY_DEPARTS_CHILDREN_TREE:"key-tree-departs",KEY_DEPARTS_PARENTS_TREE:"key-tree-disorder-departs",KEY_ALL_CHOOSE_PERSON:"key-all-choose-person",KEY_ALL_CHOOSE_DEPARTS:"key-all-choose-departs",KEY_CHOOSE_PERSONS:"key-choosePersons",KEY_CHOOSE_DEPARTS:"key-chooseDeparts",KEY_CHOSE_MAP:"key-choseMap",KEY_DEPART_POSITION:"key-depart-position",MSGHOMEBARS:[{img:"../images/icon_tabbar.png",label:"新建通知",routerLink:"dynamic-publish"},{img:"../images/icon_tabbar.png",label:"查看通知",routerLink:"message-container"}],MSGSTYLES:[{type:"text",msgtype:"text",typeNo:0,typeName:"文字"},{type:"textcard",msgtype:"textcard",typeNo:1,typeName:"文本卡片"},{type:"news",msgtype:"news",typeNo:2,typeName:"图文"},{type:"image",msgtype:"image",typeNo:3,typeName:"图片"},{type:"voice",msgtype:"voice",typeNo:4,typeName:"语音"},{type:"video",msgtype:"video",typeNo:5,typeName:"视频"},{type:"file",msgtype:"file",typeNo:6,typeName:"文件"}],MSGBANNERS:[{type:0,content:"全部"},{type:1,content:"已阅读"},{type:2,content:"未阅读"},{type:3,content:"我发的"}]}},GPIM:function(e,t,s){"use strict";var a=s("BO1k"),n=s.n(a),i=s("c/Tr"),o=s.n(i),r=s("woOf"),l=s.n(r),c=s("mvHQ"),u=s.n(c),p=s("ifoU"),d=s.n(p),h=s("MHe+"),g=s("FjHR"),f=s("YaEn"),v=s("vLgD"),m=s("AU0D"),_=s("VKKs");t.a={name:"dynamic-publish",props:{chosePersons:{type:d.a,default:function(){return new d.a}},choseDeparts:{type:d.a,default:function(){return new d.a}},content:"",uploadFiles:{type:Array,default:function(){return[]}}},components:{extraFile:h.a,toast:m.a},data:function(){return this.getDefaultData()},created:function(){console.log("获取的类型数据："+u()(g.a.MSGSTYLES))},watch:{msgType:function(e){},uploadFiles:function(e){console.log("dynamic-publish获取的文件列表："+u()(e))}},methods:{getDefaultData:function(){return{msgType:2,msgStyles:g.a.MSGSTYLES,title:"",description:"",uploadFile:{},isShowToast:!1,toastContent:"",isShow:{title:!1,description:!0,extra:!1},publishing:!1,isLoading:!1,chooseType:0,choseDepartsPersons:new d.a}},showToast:function(e){this.toastContent=e,this.isShowToast=!0},isUploading:function(e){this.isLoading=e},getUploadFiles:function(e){switch(console.log("dynamic-publish.vue获取的文件信息:"+u()(e)),this.msgType){case 2:case 3:this.$emit("uploadFiles",this.uploadFiles.concat(e));break;default:this.$emit("uploadFiles",e)}},publishMethod:function(){if(!this.publishing){if(this.publishing=!0,console.log("&&&&&com-publish&&&&&发布按钮的点击事件"),0===this.chosePersons.size&&0===this.choseDeparts.size)return this.toastContent="请选择接收人员或部门",this.isShowToast=!0,void(this.publishing=!1);if(console.log("是否合法？？？？"+this.isLegal()),!this.isLegal())return this.isShowToast=!0,void(this.publishing=!1);this.getPublishContent()}},isLegal:function(){return console.log("当前消息类型："+this.msgType),0===this.title.length?(this.toastContent="请输入标题",!1):0===this.description.length?(this.toastContent="请输入文本内容",!1):this.title.length>60?(this.toastContent="标题不得大于60字",!1):this.description.length>250?(this.toastContent="文本内容不得超过250字",!1):(0===this.uploadFiles.length?this.msgType=1:this.msgType=2,!0)},getPublishContent:function(){var e=void 0;switch(this.msgType){case 0:e={content:this.description};break;case 1:e={textcard:{title:this.title,description:this.description}};break;case 2:e={news:{articles:[{title:this.title,description:this.description,picurl:this.getPostFileInfo().fileurl}]}};break;case 3:break;case 4:e=l()({voice:{media_id:""}},this.uploadFile);break;case 5:e=l()({video:{media_id:"",title:this.title,description:this.description}},this.uploadFile);break;case 6:e=l()({file:{media_id:""}},this.uploadFile)}var t=this.getPubStyle();e.type=t.type,e.msgtype=t.msgtype,this.publish(e)},publish:function(e){console.log("****publish****");var t=this;t.getDepartsPersons(function(){return 0===t.chosePersons.size?(t.toastContent="已选部门没有人员，清重新选择",void(t.isShowToast=!0)):t.chosePersons.length>1e3?(t.toastContent="选择部门人员数大于1000，无法发布",void(t.isShowToast=!0)):(console.log("当前发布信息内容："+u()(e)),void v.a.postMessage(t.chosePersons,t.choseDeparts,e,function(e){console.log("发送消息，返回的值："+u()(e)),console.log(e),t.publishing=!1,"0000"===e.RspCode?(t.toastContent="发布成功",t.isShowToast=!0,t.resetData(),t.$emit("pubSuccess")):(t.toastContent="发布失败:"+e.RspTxt,t.isShowToast=!0)}))})},getDepartsPersons:function(e){var t=this;console.log("***getDepartsPersons***");var s=this,a=o()(s.choseDeparts.keys());console.log("获取的部门数组："+u()(a)),a.length>0?function(){var i=0,o=!0,r=!1,l=void 0;try{for(var c,p=n()(a);!(o=(c=p.next()).done);o=!0){var d=c.value;t.getDepartPersons(d,function(){i++,console.log("此时的循环次数："+i),i===a.length&&(console.log("获取的部门人员信息："+u()(s.chosePersons)),e())})}}catch(e){r=!0,l=e}finally{try{!o&&p.return&&p.return()}finally{if(r)throw l}}}():(console.log("获取的部门人员信息："+u()(s.chosePersons)),e())},getDepartPersons:function(e,t){console.log("****getDepartPersons*****");var s=this;v.a.getDepartPersons(e,1,0,function(e){console.log("获取的人员详情："+u()(e));var a=!0,i=!1,o=void 0;try{for(var r,l=n()(e);!(a=(r=l.next()).done);a=!0){var c=r.value;s.chosePersons.set(c.userid,c.name)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}t()})},resetData:function(){this.title="",this.description="",this.$emit("clearData")},getPubStyle:function(){for(var e in g.a.MSGSTYLES){var t=g.a.MSGSTYLES[e];if(t.typeNo===this.msgType)return t}},routeToPersons:function(e){var t=0===e?"depart-person":"choose-depart";0===e?_.a.setSessionMap(g.a.KEY_CHOOSE_PERSONS,this.chosePersons):(_.a.setSessionMap(g.a.KEY_CHOOSE_PERSONS,this.choseDeparts),_.a.setSessionSet(g.a.KEY_ALL_CHOOSE_DEPARTS,this.choseDeparts.keys())),f.a.push({name:t,params:{id:-1,path:"0"}})},getPostFileInfo:function(){var e=[],t=[],s=!0,a=!1,i=void 0;try{for(var o,r=n()(this.uploadFiles);!(s=(o=r.next()).done);s=!0){var l=o.value;e.push(l.filephypath),t.push(l.fileurl)}}catch(e){a=!0,i=e}finally{try{!s&&r.return&&r.return()}finally{if(a)throw i}}return{filephypath:e.join("|="),fileurl:t.join("|=")}}}}},GUFS:function(e,t,s){"use strict";function a(e){s("Hp6M")}var n=s("nA+z"),i=s("PI+T"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,null,null);t.a=l.exports},Hp6M:function(e,t){},HsOh:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-uploader"},[s("div",{staticClass:"weui-uploader__hd"},[s("p",{staticClass:"weui-uploader__title"},[e._v("图片上传")]),e._v(" "),s("div",{staticClass:"weui-uploader__info"},[e._v(e._s(e.showImages.length)+"/9")])]),e._v(" "),s("div",{staticClass:"weui-uploader__bd"},[s("ul",{staticClass:"weui-uploader__files",attrs:{id:"uploaderFiles"}},e._l(e.showImages,function(t,a){return s("li",{staticClass:"weui-uploader__file",style:{backgroundImage:"url("+t+")"},on:{click:function(t){e.previewImage(a)}}},[s("div",{staticClass:"weui-uploader__file-content",class:[{displayNone:5!==e.msgType},{displayBlock:5===e.msgType}]},[e._v("\n          video\n        ")])])})),e._v(" "),s("div",{staticClass:"weui-uploader__input-box"},[s("input",{staticClass:"weui-uploader__input",attrs:{id:"uploaderInput",type:"file",accept:e.getAcceptType(),disabled:e.uploadFiles.length>=9,multiple:""},on:{change:function(t){e.selectFile(t)}}})])])])},n=[],i={render:a,staticRenderFns:n};t.a=i},IQ2I:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoading?a("div",[e._v("loading")]):a("div",[e.curDepartInfo.departList.length>0?a("div",{staticClass:"weui-cells"},e._l(e.curDepartInfo.departList,function(t,s){return a("a",{staticClass:"weui-cell weui-cell_access"},[a("div",{staticClass:"weui-cell__hd"},[a("label",{attrs:{for:t.value}},[a("input",{attrs:{type:"checkbox",id:t.value},domProps:{value:t.value,checked:t.isChecked},on:{change:function(s){e.toggleDepart(t,s)}}}),e._v(" "),a("i",{staticClass:"weui-icon-checked"})])]),e._v(" "),a("div",{staticClass:"weui-cell__bd",on:{click:function(a){e.routerToChild(t,s)}}},[a("p",[e._v(e._s(t.title))])]),e._v(" "),a("div",{staticClass:"weui-cell__ft",on:{click:function(a){e.routerToChild(t,s)}}})])})):a("div",{staticClass:"page"},[a("img",{staticStyle:{width:"50%",padding:"25% 25% 10%",height:"auto","z-index":"800"},attrs:{src:s("punY")}}),e._v(" "),a("p",{staticStyle:{width:"100%","text-align":"center",color:"darkgray"}},[e._v("此部门暂无子部门！")])])])},n=[],i={render:a,staticRenderFns:n};t.a=i},InRP:function(e,t){},KyrF:function(e,t,s){"use strict";var a=s("FjHR");t.a={name:"msg-banner",data:function(){return{msgBanners:a.a.MSGBANNERS,activeIndex:0}},methods:{bannerClick:function(e,t){this.activeIndex=e,this.$emit("choseBanner",t)}}}},M93x:function(e,t,s){"use strict";var a=s("xJD8"),n=s("VIFX"),i=s("VU/8"),o=i(a.a,n.a,null,null,null);t.a=o.exports},"MHe+":function(e,t,s){"use strict";function a(e){s("+tDm")}var n=s("2Nak"),i=s("HsOh"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-35cc6079",null);t.a=l.exports},NDNE:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),n=s("M93x"),i=s("YaEn"),o=s("BRbc"),r=(s.n(o),s("U8mb"));s.n(r);new a.a({el:"#app",router:i.a,template:"<App></App>",components:{App:n.a}})},"PI+T":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"container"}},[a("div",{staticClass:"page tabbar js_show"},[a("div",{staticClass:"page__bd",staticStyle:{height:"100%"}},[a("div",{staticClass:"weui-tab"},[a("div",{staticClass:"weui-tab__panel"},[a("router-view")],1),e._v(" "),a("div",{staticClass:"weui-tabbar"},e._l(e.bars,function(t,n){return a("router-link",{key:n,staticClass:"weui-tabbar__item",attrs:{to:t.routerLink,"active-class":"weui-bar__item_on"}},[a("span",{staticClass:"tabbar-span"},[a("img",{attrs:{src:s("A+8S")}})]),e._v(" "),a("p",{staticClass:"weui-tabbar__label"},[e._v(e._s(t.label))])])}))])])])])},n=[],i={render:a,staticRenderFns:n};t.a=i},PJFI:function(e,t,s){"use strict";function a(e){s("oOAe")}var n=s("KyrF"),i=s("6Ldw"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-716b4f96",null);t.a=l.exports},RrzC:function(e,t,s){"use strict";function a(e){s("Z2Ac")}var n=s("92vA"),i=s("TKnw"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-f66734e4",null);t.a=l.exports},StER:function(e,t,s){"use strict";var a=s("pFYg"),n=s.n(a),i=s("Gu7T"),o=s.n(i),r=s("lHA8"),l=s.n(r),c=s("BO1k"),u=s.n(c),p=s("c/Tr"),d=s.n(p),h=s("mvHQ"),g=s.n(h),f=s("FjHR"),v=s("VKKs"),m=s("vLgD"),_=s("YaEn");t.a={name:"depart-person",data:function(){return{curDepartInfo:{departList:[],personList:[]},departId:-1,path:"0",childrenTree:[],isLoading:!1}},created:function(){this.requireAllDepartList()},watch:{$route:function(e,t){console.log("路径："+this.$route.params.path),this.departId=parseInt(this.$route.params.id),this.path=this.$route.params.path,this.requireAllDepartList()}},methods:{setSessionStorage:function(){v.a.setSessionStorage(f.a.KEY_DEPARTS_CHILDREN_TREE,this.childrenTree)},setDepartStatus:function(){console.log("****choose-depart****setDepartStatus*****");var e=this.curDepartInfo.departList,t=v.a.getSessionSet(f.a.KEY_ALL_CHOOSE_DEPARTS);console.log("获取的已选部门数组："+g()(d()(v.a.getSessionMap(f.a.KEY_CHOOSE_DEPARTS))));var s=!0,a=!1,n=void 0;try{for(var i,o=u()(e);!(s=(i=o.next()).done);s=!0){var r=i.value;r.isChecked=t.has(r.value)}}catch(e){a=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}this.isLoading=!1,this.setSessionStorage()},toggleChoseDepart:function(e,t){console.log("****choose-depart****toggleChoseDepart*****");var s=new l.a;t||this.getAllParentIds(e,s),this.getAllChildIds(e,s),console.log("获取的要删除的ids:"+g()(d()(s)));var a=v.a.getSessionSet(f.a.KEY_ALL_CHOOSE_DEPARTS),n=v.a.getSessionMap(f.a.KEY_CHOOSE_DEPARTS);console.log("获取的已选部门数组："+g()(d()([].concat(o()(n))))),t||this.addParentChildDeparts(n);var i=!0,r=!1,c=void 0;try{for(var p,h=u()(s);!(i=(p=h.next()).done);i=!0){var m=p.value;t?a.add(m):a.delete(m),n.delete(m)}}catch(e){r=!0,c=e}finally{try{!i&&h.return&&h.return()}finally{if(r)throw c}}t?(a.add(e.value),n.set(e.value,e.title)):(a.delete(e.value),n.delete(e.value)),console.log("保存的已选部门map："+g()(d()([].concat(o()(n))))),console.log("保存的已选部门allSet:"+g()(d()(a))),v.a.setSessionSet(f.a.KEY_ALL_CHOOSE_DEPARTS,a),v.a.setSessionMap(f.a.KEY_CHOOSE_DEPARTS,n),this.$emit("choseDeparts",n)},setParentIsChose:function(e,t){console.log("****choose-depart****setParentIsChose*****"),console.log("本部门信息："+g()(this.curDepartInfo));var s=this.path.split("-");this.setParentChoseInSession(s,e,t)},setParentChoseInSession:function(e,t,s){console.log("****choose-depart****setParentChoseInSession****");var a=this.getNodeInTree(this.childrenTree,e);console.log("获取的父部门信息:"+g()(a));var n=a.departList.every(function(e){return t.has(e.value)});if(console.log("部门是否已选择："+n),n){s.add(a.value),t.set(a.value,a.title),console.log("选择后的数组："+g()(t));var i=!0,o=!1,r=void 0;try{for(var l,c=u()(a.departList);!(i=(l=c.next()).done);i=!0){var p=l.value;t.delete(p.value)}}catch(e){o=!0,r=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw r}}console.log("获取的当前路径数组："+e),e.length>1&&this.setParentChoseInSession(e.slice(0,e.length-1),t,s)}},addParentChildDeparts:function(e){console.log("****choose-depart****addParentChildDeparts****");var t=this.path.split("-"),s=this.getChoseParent(this.childrenTree,t,e);null!==s&&this.addChildInSession(s,e)},addChildInSession:function(e,t){if(console.log("****choose-depart****addChildInSession****"),!(this.curDepartInfo.departList.length>0&&e.value===this.curDepartInfo.departList[0].value)&&e.departList.length>0){var s=!0,a=!1,n=void 0;try{for(var i,o=u()(e.departList);!(s=(i=o.next()).done);s=!0){var r=i.value;t.set(r.value,r.title),this.addChildInSession(r,t)}}catch(e){a=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}}},getChoseParent:function(e,t,s){return console.log("****choose-depart****getChoseParent****"),t.length>1?s.has(e[t[0]].value)?(console.log("获取的父部门信息："+e[t[0]]),e[t[0]]):this.getChoseParent(e[t[0]].departList,t.slice(1),s):null},getAllParentIds:function(e,t){if(console.log("****choose-depart**** getAllParentIds****"),console.log("当前部门信息："+g()(e)),void 0===e.parentDepart)return t;console.log(void 0===t?"undefined":n()(t)),console.log(t),t.add(e.parentDepart.value),this.getAllParentIds(e.parentDepart,t)},getAllChildIds:function(e,t){if(console.log("****choose-depart**** getAllChildIds****"),console.log(g()(d()(t))),console.log(t.size),!(e.departList.length>0))return t.add(e.value);var s=!0,a=!1,n=void 0;try{for(var i,o=u()(e.departList);!(s=(i=o.next()).done);s=!0){var r=i.value;t.add(r.value),console.log(g()(d()(t))),console.log(t.size),this.getAllChildIds(r,t)}}catch(e){a=!0,n=e}finally{try{!s&&o.return&&o.return()}finally{if(a)throw n}}},toggleDepart:function(e,t){console.log("****choose-depart****toggleDepart****");var s=t.target.checked;this.toggleChoseDepart(e,s)},requireAllDepartList:function(){console.log("****choose-depart****requireAllDepartList****");var e=this;if(e.isLoading=!0,v.a.getSessionArray(f.a.KEY_DEPARTS_CHILDREN_TREE).length>0)return e.childrenTree=v.a.getSessionArray(f.a.KEY_DEPARTS_CHILDREN_TREE),console.log("获取的所有部门数据信息："+g()(e.childrenTree)),void e.getCurDepartInfo();m.a.getDepartList(function(t){console.log("depart-person获取的部门列表："+t),e.childrenTree=e.getChildrenTree(JSON.parse(t)),e.getCurDepartInfo()})},getCurDepartInfo:function(){console.log("****choose-depart****getCurDepartInfo****");var e=this.path.split("-");console.log("获取的路径数组："+e),this.curDepartInfo=this.getNodeInTree(this.childrenTree,e),console.log("获取的本部门数据："+g()(this.curDepartInfo)),this.setDepartStatus()},getNodeInTree:function(e,t){return console.log("****choose-depart****getNodeInTree****"),1===t.length?(console.log("根据路径获取的node节点："+g()(e[t[0]])),e[t[0]]):this.getNodeInTree(e[t[0]].departList,t.slice(1))},getChildrenTree:function(e){if(console.log("****choose-depart***getChildrenTree***"),void 0===e||0===e.length)return[];e=JSON.parse(g()(this.getParentsTree(e))),e.sort(function(e,t){return e.value-t.value});for(var t={},s=void 0,a=[],n=0;n<e.length;n++)s=e[n],s.departList=[],s.personList=[],t[s.value]=n,s.parentvalue>0?1===s.parentvalue?e[t[-1]].departList.push(s):e[t[s.parentvalue]].departList.push(s):a.push(s);return console.log("getChildrenTree获取的数据："+g()(a)),a},getParentsTree:function(e){if(console.log("****choose-depart***getParentsTree***"),!e||0===e.length)return[];e.sort(function(e,t){return e.value-t.value}),console.log("要处理的数组："+g()(e));for(var t={},s=void 0,a=[],n=0;n<e.length;n++)s=e[n],t[s.value]=n,a.push(s),s.parentvalue>0&&(1===s.parentvalue?e[n].parentDepart=e[t[-1]]:e[n].parentDepart=e[t[s.parentvalue]]);return console.log("getParentsTree获取的数据："+g()(a)),a},routerToChild:function(e,t){console.log("routerToChild"),0!==e.departList.length&&_.a.push({name:"choose-depart",params:{id:e.value,path:this.path+"-"+t}})}}}},TKnw:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-view",{class:[{"margin-bottom50":e.isBottomMargin()}],on:{chosePersons:e.getChosePersons,choseDeparts:e.getChoseDeparts}}),e._v(" "),e.isBottomMargin()?s("div",{staticClass:"weui-flex fixed_bottom"},[s("div",{staticClass:"weui-flex__item"},[s("div",{staticClass:"bottom_button",staticStyle:{float:"right"},on:{click:e.routerToPub}},[s("a",{staticClass:"weui-btn weui-btn_default cancel"},[e._v("\n          取消\n        ")])])]),e._v(" "),s("div",{staticStyle:{width:"15px"}}),e._v(" "),s("div",{staticClass:"weui-flex__item"},[s("div",{staticClass:"bottom_button",on:{click:e.chooseDepartsPersons}},[s("a",{staticClass:"weui-btn weui-btn_primary confirm"},[e._v("\n          确定("+e._s(e.choseSize)+")\n        ")])])])]):e._e()],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},Tmsh:function(e,t,s){"use strict";var a=s("ZVJR"),n=s("UVKb"),i=s("VU/8"),o=i(a.a,n.a,null,null,null);t.a=o.exports},U8mb:function(e,t){},UVKb:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("search"),e._v(" "),s("read-list")],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},VIFX:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"background-color":"white"},attrs:{id:"app"}},[s("keep-alive",{attrs:{include:"dynamic-publish"}},[s("router-view",{attrs:{uploadFiles:e.uploadFiles,chosePersons:e.chosePersons,choseDeparts:e.choseDeparts},on:{uploadFiles:e.getUploadFiles,chosePersons:e.getChosePerson,choseDeparts:e.getChoseDeparts,clearData:e.clearData,dealtImages:e.getDealtImages}})],1)],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},VKKs:function(e,t,s){"use strict";s.d(t,"a",function(){return h});var a=s("Gu7T"),n=s.n(a),i=s("ifoU"),o=s.n(i),r=s("lHA8"),l=s.n(r),c=s("c/Tr"),u=s.n(c),p=s("mvHQ"),d=s.n(p),h={toggleValueInSessionArray:function(e,t,s){var a=this.getSessionArray(e);console.log("获取的本地的值："+d()(a)),sessionStorage.setItem(e,d()(this.toggleValueInArray(a,t,s)))},toggleValueInArray:function(e,t,s){console.log("是否添加数据？"+s+",要处理的值:"+t);var a=this.isExistInArray(e,t);return s?a[1]<0&&a[0].push(t):a[1]>=0&&a[0].splice(a[1],1),console.log("加载或删除后的数组："+d()(a[0])),a[0]},getSessionArray:function(e){var t=void 0;return t=sessionStorage.getItem(e)?JSON.parse(sessionStorage.getItem(e)):[],console.log("获取的本地存储数组："+d()(t)),t},setSessionStorage:function(e,t){if(console.log("***setSessionStorage****"),void 0===t)return void console.log("要存储的值is undefined");console.log("要存储的值："+d()(t)),sessionStorage.setItem(e,d()(t))},isExistInSessionArray:function(e,t){var s=this.getSessionArray(e);return this.isExistInArray(s,t)},isExistInArray:function(e,t){var s=[e,e.indexOf(t)];return console.log("获取的是否值是否存在于数组中："+d()(s)),s},toggleValueInSessionSet:function(e,t,s){var a=this.getSessionSet(e);console.log("获取的本地的值："+d()(a)),sessionStorage.setItem(e,d()(this.toggleValueInSet(a,t,s)))},toggleValueInSet:function(e,t,s){return s?e.add(t):e.delete(t),e},setSessionSet:function(e,t){this.setSessionStorage(e,u()(t))},getSessionSet:function(e){var t=void 0;return sessionStorage.getItem(e)?(console.log("getSessionSet:"+sessionStorage.getItem(e)),t=new l.a(JSON.parse(sessionStorage.getItem(e)))):t=new l.a,console.log("获取的本地存储数组："+d()(t)),t},isExistInSessionSet:function(e,t){return this.getSessionArray(e).has(t)},getSessionMap:function(e){return console.log("****getSessionMap***获取的本地值:"+sessionStorage.getItem(e)),sessionStorage.getItem(e)?new o.a(JSON.parse(sessionStorage.getItem(e))):new o.a},getSessionMapValue:function(e,t){var s=this.getSessionMap(e);return console.log("***getSessionMapValue***"+d()(s)),s.has(t)?s.get(t):null},toggleValueInSessionMap:function(e,t,s,a){console.log("***toggleValueInSessionMap***");var i=this.getSessionMap(e);this.toggleValueInMap(i,t,s,a),console.log("处理后的map"+d()([].concat(n()(i)))),this.setSessionMap(e,i)},setSessionMap:function(e,t){console.log("***setSessionMap***"),this.setSessionStorage(e,[].concat(n()(t)))},toggleValueInMap:function(e,t,s,a){console.log("***toggleValueInMap***"),a?e.set(t,s):e.has(t)&&e.delete(t)}}},WSDS:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"preview-container"},[s("div",{staticClass:"weui-gallery display-block",attrs:{id:"gallery"},on:{click:function(t){e.showGallery=!1}}},[s("div",{staticClass:"swiper-container"},[s("div",{staticClass:"swiper-wrapper"},e._l(e.dealtImages,function(e,t){return s("div",{staticClass:"swiper-slide",style:{backgroundImage:"url("+e.fileurl+")",backgroundSize:"cover",backgroundPosition:"center"}})})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dealtImages.length>1,expression:"dealtImages.length>1"}],staticClass:"swiper-pagination"})]),e._v(" "),s("div",{staticClass:"weui-gallery__opr"},[s("a",{staticClass:"weui-gallery__del"},[s("i",{staticClass:"weui-icon-delete weui-icon_gallery-delete",on:{click:function(t){e.showDialog=!0}}})])])]),e._v(" "),s("div",{staticClass:"js_dialog",class:[{"display-none":!e.showDialog},{"display-block":e.showDialog}]},[s("div",{staticClass:"weui-mask"}),e._v(" "),s("div",{staticClass:"weui-dialog"},[e._m(0),e._v(" "),s("div",{staticClass:"weui-dialog__bd"},[e._v("确定要删除此张图片？")]),e._v(" "),s("div",{staticClass:"weui-dialog__ft"},[s("a",{staticClass:"weui-dialog__btn weui-dialog__btn-default",on:{click:function(t){e.delImage()}}},[e._v("确定")]),e._v(" "),s("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",on:{click:function(t){e.showDialog=!1}}},[e._v("取消")])])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-dialog__hd"},[s("strong",{staticClass:"weui-dialog__title"},[e._v("删除图片")])])}],i={render:a,staticRenderFns:n};t.a=i},YCFt:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-search-bar",attrs:{id:"searchBar"}},[s("form",{staticClass:"weui-search-bar__form"},[s("div",{staticClass:"weui-search-bar__box"},[s("i",{staticClass:"weui-icon-search"}),e._v(" "),s("input",{staticClass:"weui-search-bar__input",attrs:{type:"search",placeholder:"搜索",id:"searchInput",required:""}}),e._v(" "),s("a",{staticClass:"weui-icon-clear",attrs:{id:"searchClear"}})]),e._v(" "),s("label",{staticClass:"weui-search-bar__label",attrs:{id:"searchText"}},[s("i",{staticClass:"weui-icon-search"}),e._v(" "),s("span",[e._v("搜索")])])]),e._v(" "),s("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{id:"searchCancel"}},[e._v("取消")])])}],i={render:a,staticRenderFns:n};t.a=i},YaEn:function(e,t,s){"use strict";var a=s("7+uW"),n=s("/ocq"),i=s("mTVx"),o=s("GUFS"),r=s("8SfJ"),l=s("a8PK"),c=s("RrzC"),u=s("Tmsh"),p=s("r4PW"),d=s("8wv8"),h=s("1+z2");a.a.use(n.a),t.a=new n.a({routes:[{path:"/",redirect:"/dynamic-publish"},{path:"/dynamic-publish",name:"dynamic-publish",component:i.a},{path:"/msg-home",name:"msg-home",component:o.a,children:[{path:"/dynamic-publish",name:"dynamic-publish",component:i.a},{path:"message-container",name:"message-container",component:r.a},{path:"",redirect:{name:"dynamic-publish"}}]},{path:"/message-detail/:id",name:"message-detail",component:l.a},{path:"/choose-container",name:"choose-container",component:c.a,children:[{path:"depart-person/:id/:path",name:"depart-person",component:h.a},{path:"choose-depart/:id/:path",name:"choose-depart",component:d.a},{path:"",redirect:{name:"depart-person",params:{id:-1,path:"0"}}}]},{path:"read-container",name:"read-container",component:u.a},{path:"/image-preview/:index",name:"image-preview",component:p.a}]})},Z2Ac:function(e,t){},ZVJR:function(e,t,s){"use strict";var a=s("7tlc"),n=s("7biW");t.a={name:"read-container",components:{readList:a.a,search:n.a},data:function(){return{}},watch:{},created:function(){},methods:{}}},ZbU0:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.listData.length>0?e._l(e.listData,function(t,a){return s("div",[s("div",{staticClass:"weui-flex"},[s("div",{staticClass:"weui-flex__item"},[s("p",[s("span"),e._v(e._s(t.title))])]),e._v(" "),s("p",[e._v(e._s(t.date))])]),e._v(" "),s("p",[e._v(e._s(t.content))]),e._v(" "),s("div")])}):s("div")],2)},n=[],i={render:a,staticRenderFns:n};t.a=i},ZqH5:function(e,t,s){"use strict";t.a={name:"reply-list",props:{msgId:{type:Number}},data:function(){return{listData:[]}}}},a8PK:function(e,t,s){"use strict";var a=s("6oqw"),n=s("j73e"),i=s("VU/8"),o=i(a.a,n.a,null,null,null);t.a=o.exports},"aPZ/":function(e,t){},hC5p:function(e,t,s){"use strict";var a=s("mvHQ"),n=s.n(a),i=s("BO1k"),o=s.n(i),r=s("ifoU"),l=s.n(r),c=s("FjHR"),u=s("VKKs"),p=s("vLgD"),d=s("YaEn");t.a={name:"depart-person",props:{chosePersons:{type:l.a,default:function(){return new l.a}}},data:function(){return{curDepartInfo:{departList:[],personList:[]},departId:-1,path:"0",childrenTree:[],isLoading:!1}},created:function(){this.requireAllDepartList()},watch:{$route:function(e,t){console.log("当前routeId:"+this.$route.params.id+",当前routePath:"+this.$route.params.path),this.departId=parseInt(this.$route.params.id),this.path=this.$route.params.path,console.log("当前的departId："+this.departId+",当前path:"+this.path),this.requireAllDepartList()}},methods:{setSessionStorage:function(){u.a.setSessionStorage(c.a.KEY_DEPARTS_PARENTS_TREE,this.childrenTree)},togglePerson:function(e,t){console.log("***togglePerson***");var s=t.target.checked;u.a.toggleValueInSessionMap(c.a.KEY_CHOOSE_PERSONS,e.userid,e.name,s),this.$emit("chosePersons",u.a.getSessionMap(c.a.KEY_CHOOSE_PERSONS))},setPersonListStatus:function(){console.log("****setPersonListStatus*****");var e=u.a.getSessionMap(c.a.KEY_CHOOSE_PERSONS),t=!0,s=!1,a=void 0;try{for(var n,i=o()(this.curDepartInfo.personList);!(t=(n=i.next()).done);t=!0){var r=n.value;r.isChecked=e.has(r.userid)}}catch(e){s=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(s)throw a}}},requireAllDepartList:function(){console.log("****获取所有部门列表****");var e=this;if(e.isLoading=!0,u.a.getSessionArray(c.a.KEY_DEPARTS_CHILDREN_TREE).length>0)return e.childrenTree=u.a.getSessionArray(c.a.KEY_DEPARTS_CHILDREN_TREE),console.log("requireAllDepartList获取的本地存储数组："+n()(e.childrenTree)),void e.getCurDepartInfo();p.a.getDepartList(function(t){console.log("depart-person获取的部门列表："+n()(t)),e.childrenTree=e.getChildrenTree(JSON.parse(t)),e.getCurDepartInfo()})},getCurDepartPersons:function(){var e=this;0===e.curDepartInfo.personList.length?p.a.getDepartPersons(e.$route.params.id,0,1,function(t){console.log("获取的本部门人员:"+n()(t)),e.curDepartInfo.personList=t,e.setPersonListStatus(),e.isLoading=!1,console.log("getCurDepartPersons获取的本部门数据："+n()(e.curDepartInfo)),e.setSessionStorage()}):(e.isLoading=!1,e.setSessionStorage())},getCurDepartInfo:function(){var e=this.path.split("-");console.log("本部门的路径："+e),this.curDepartInfo=this.getNodeInTree(this.childrenTree,e),console.log("获取的本部门信息："+n()(this.curDepartInfo)),this.getCurDepartPersons()},getNodeInTree:function(e,t){return 1===t.length?(console.log("根据路径获取的node节点："+n()(e[t[0]])),e[t[0]]):this.getNodeInTree(e[t[0]].departList,t.slice(1))},getChildrenTree:function(e){if(void 0===e||0===e.length)return[];e.sort(function(e,t){return e.value-t.value});for(var t={},s=void 0,a=[],i=0;i<e.length;i++)s=e[i],s.departList=[],s.personList=[],t[s.value]=i,s.parentvalue>0?1===s.parentvalue?e[t[-1]].departList.push(s):e[t[s.parentvalue]].departList.push(s):a.push(s);return console.log("重拍数组后的数据："+n()(a)),a},routerToChild:function(e,t){d.a.push({name:"depart-person",params:{id:e.value,path:this.path+"-"+t}})}}}},j73e:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._m(0),e._v(" "),e._m(1),e._v(" "),s("reply-list",{attrs:{msgId:e.msgId}}),e._v(" "),e._m(2)],1)},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2"),e._v(" "),s("p"),e._v(" "),s("div",[s("p",[e._v("\n        发布人\n      ")]),e._v(" "),s("p",[e._v("发布时间")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-flex"},[s("div",{staticClass:"weui-flex__item"},[s("p",[e._v("通知人数")])]),e._v(" "),s("div",{staticClass:"weui-flex__item"},[s("p",[e._v("已阅读")])]),e._v(" "),s("div",{staticClass:"weui-flex__item"},[s("p",[e._v("未阅读")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"weui-cell"},[s("input",{staticClass:"weui-input"})])}],i={render:a,staticRenderFns:n};t.a=i},lL0Y:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"weui-cells"},[s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.title,expression:"title",modifiers:{trim:!0}}],staticClass:"weui-textarea title",attrs:{maxlength:"60",placeholder:"在此输入通知标题,最多60字"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.description,expression:"description",modifiers:{trim:!0}}],staticClass:"weui-textarea description",attrs:{maxlength:"250",placeholder:"在此输入通知内容,最多250字"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),s("div",{staticClass:"weui-cell"},[s("div",{staticClass:"weui-cell__bd"},[s("extra-file",{attrs:{msgType:e.msgType,uploadFiles:e.uploadFiles},on:{showToast:e.showToast,uploadFiles:e.getUploadFiles,isUploading:e.isUploading}})],1)]),e._v(" "),s("div",{staticStyle:{width:"100%",height:"10px","background-color":"#f2f2f2"}}),e._v(" "),s("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(t){e.routeToPersons(0)}}},[s("div",{staticClass:"weui-cell__bd"},[e._v("\n        通知人员选择\n      ")]),e._v(" "),s("div",{staticClass:"weui-cell__ft"},[e._v("\n        "+e._s(e.chosePersons.size>99?"99+":e.chosePersons.size)+"\n      ")])]),e._v(" "),s("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(t){e.routeToPersons(1)}}},[s("div",{staticClass:"weui-cell__bd"},[e._v("\n        通知部门选择\n      ")]),e._v(" "),s("div",{staticClass:"weui-cell__ft"},[e._v("\n        "+e._s(e.choseDeparts.size>99?"99+":e.choseDeparts.size)+"\n      ")])])]),e._v(" "),s("a",{staticClass:"weui-btn weui-btn_primary",on:{click:e.publishMethod}},[e._v("发布")]),e._v(" "),s("toast",{attrs:{isShow:e.isShowToast,isLoading:e.isLoading,toastContent:e.toastContent},on:{toastClosed:function(t){e.isShowToast=!1}}})],1)},n=[],i={render:a,staticRenderFns:n};t.a=i},lUzY:function(e,t){},"m/Ef":function(e,t,s){"use strict";t.a={name:"toast",props:{toastContent:{type:String,default:"请输入内容或选择图片"},toastDuration:{type:Number,default:2},isShow:!1,isLoading:!1},data:function(){return{isToastShow:!1}},watch:{isShow:function(e,t){var s=this;e&&(s.isToastShow=!0,setTimeout(function(){s.isToastShow=!1,s.$emit("toastClosed")},1e3*s.toastDuration))}}}},mAnT:function(e,t){},mTVx:function(e,t,s){"use strict";function a(e){s("NDNE")}var n=s("GPIM"),i=s("lL0Y"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-3f79ee0e",null);t.a=l.exports},mgS3:function(e,t){},"nA+z":function(e,t,s){"use strict";var a=s("FjHR");t.a={name:"msg-home",data:function(){return{bars:a.a.MSGHOMEBARS,activeLink:0}},methods:{}}},oOAe:function(e,t){},pqQu:function(e,t,s){"use strict";var a=s("7biW"),n=s("PJFI"),i=s("93kB");t.a={name:"message-container",data:function(){return{}},components:{msgSearch:a.a,msgBanner:n.a,msgList:i.a},methods:{}}},punY:function(e,t,s){e.exports="."+s.p+"static/img/none.54b2b5d.png"},r4PW:function(e,t,s){"use strict";function a(e){s("aPZ/")}var n=s("yG6P"),i=s("WSDS"),o=s("VU/8"),r=a,l=o(n.a,i.a,r,"data-v-23eec8a3",null);t.a=l.exports},r6xv:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div"),e._v(" "),s("ul",e._l(e.listData,function(t,a){return s("li",[s("img"),e._v(" "),e._m(0,!0)])}))])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("p"),e._v(" "),s("p")]),e._v(" "),s("p")])}],i={render:a,staticRenderFns:n};t.a=i},sPQq:function(e,t,s){"use strict";t.a={name:"msg-list",data:function(){return{listData:[]}},methods:{}}},vLgD:function(e,t,s){"use strict";s.d(t,"a",function(){return u});var a=s("woOf"),n=s.n(a),i=s("c/Tr"),o=s.n(i),r=s("mvHQ"),l=s.n(r),c=s("FjHR"),u={postData:function(e,t,s){var a=new XMLHttpRequest;a.responseType="json",a.onreadystatechange=function(){if(console.log("此时的状态："+a.readyState),console.log("此时的数据："+l()(a.response)),4===a.readyState){if(null===a.response)return;s(a.response)}},a.open("POST",e,!0),a.send(t)},getDepartList:function(e){this.postData(c.a.MAINURL,l()({cmd:"persondeparts",type:"findpage"}),function(t){console.log("获取的部门列表值："+l()(t)),"0000"===t.RspCode&&e(t.RspData)})},getDepartPersons:function(e,t,s,a){s=s?"info":"base",void 0!==e.value&&(e=e.value),this.postData(c.a.MAINURL,l()({cmd:"departpersons",type:"findpage",colid:e,colv:t,callcol:s}),function(e){console.log("获取的部门人员列表列表值："+l()(e)),a("0000"===e.RspCode?e.RspData:[])})},publishMessage:function(e,t,s){var a={cmd:"msg",type:"text",touser:userids.join("|"),toparty:"",totag:"",content:t,tousername:usernames.join("|"),topartyname:"",totagname:""};this.postData(c.a.MAINURL,l()(a),function(e){console.log("发布消息返回的值："+l()(e)),s(e)})},postMessage:function(e,t,s,a){var i={cmd:"msg",touser:o()(e.keys()).join("|"),toparty:o()(t.keys()).join("|"),totag:"",safe:0,tousername:o()(e.values()).join("|"),topartyname:o()(t.values()).join("|"),totagname:""};n()(i,s),console.log("发布信息传递的值："+l()(i)),this.postData(c.a.MAINURL,l()(i),function(e){console.log("发布消息返回的值："+l()(e)),a(e)})}}},vrS7:function(e,t){},xJD8:function(e,t,s){"use strict";var a=s("mvHQ"),n=s.n(a),i=s("ifoU"),o=s.n(i);t.a={name:"app",data:function(){return{chosePersons:new o.a,choseDeparts:new o.a,uploadFiles:[]}},watch:{uploadFiles:function(e){console.log("app.vue获取的选择的文件列表的当前值："+n()(e))}},methods:{clearData:function(){this.chosePersons=new o.a,this.choseDeparts=new o.a,this.uploadFiles=[],sessionStorage.clear()},getChosePerson:function(e){this.chosePersons=e},getChoseDeparts:function(e){this.choseDeparts=e},getUploadFiles:function(e){console.log("app.vue获取的上传后的文件列表的当前值："+n()(e)),this.uploadFiles=e},getDealtImages:function(e){console.log("app.vue获取的删除后的文件列表的当前值："+n()(e)),this.uploadFiles=e}}}},y7Xq:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isLoading?a("div",[e._v("loading")]):a("div",[e.curDepartInfo.departList.length>0||e.curDepartInfo.personList.length>0?a("div",{staticClass:"weui-cells"},[[e._l(e.curDepartInfo.personList,function(t,s){return a("label",{staticClass:"weui-cell weui-check__label",attrs:{for:t.userid}},[a("div",{staticClass:"weui-cell__hd"},[a("input",{staticClass:"weui-check",attrs:{type:"checkbox",id:t.userid},domProps:{value:t.userid,checked:e.isAllChecked||t.isChecked},on:{change:function(s){e.togglePerson(t,s)}}}),e._v(" "),a("i",{staticClass:"weui-icon-checked"})]),e._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("p",[e._v(e._s(t.name))])])])}),e._v(" "),e._l(e.curDepartInfo.departList,function(t,s){return a("a",{staticClass:"weui-cell weui-cell_access",on:{click:function(a){e.routerToChild(t,s)}}},[a("div",{staticClass:"weui-cell__bd"},[a("p",[e._v(e._s(t.title))])]),e._v(" "),a("div",{staticClass:"weui-cell__ft"})])})]],2):a("div",{staticClass:"page"},[a("img",{staticStyle:{width:"50%",padding:"25% 25% 10%",height:"auto","z-index":"800"},attrs:{src:s("punY")}}),e._v(" "),a("p",{staticStyle:{width:"100%","text-align":"center",color:"darkgray"}},[e._v("此部门暂无子部门和人员！")])])])},n=[],i={render:a,staticRenderFns:n};t.a=i},yG6P:function(e,t,s){"use strict";var a=s("mvHQ"),n=s.n(a),i=s("mgS3"),o=(s.n(i),s("99MR")),r=s.n(o),l=s("YaEn");t.a={name:"image-preview",props:{uploadFiles:{type:Array,default:function(){return[]}}},data:function(){return{showGallery:!1,mSwiper:{},dealtImages:this.uploadFiles,showDialog:!1}},watch:{uploadFiles:function(e){console.log("preview界面获取的uploadFiles："+n()(e))}},mounted:function(){this.mSwiper=new r.a(".swiper-container",{initialSlide:parseInt(this.$route.params.index),pagination:".swiper-pagination",paginationClickable:!0})},filters:{showTitle:function(e){switch(e){case 1:case 2:case 5:return!0;case 0:case 3:case 4:case 6:default:return!1}},showDescription:function(e){switch(e){case 0:case 1:case 2:return!0;case 3:case 4:case 6:default:return!1}},showExtra:function(e){switch(e){case 0:case 1:return!1;case 2:case 3:case 4:case 5:case 6:return!0;default:return!1}}},methods:{delImage:function(){console.log("删除文件"),this.dealtImages.splice(this.mSwiper.activeIndex,1),console.log("删除文件后的值："+n()(this.dealtImages)),this.$emit("dealtImages",this.dealtImages),this.mSwiper.removeSlide(this.dealtImages.length),this.showDialog=!1,0===this.dealtImages.length&&l.a.go(-1)}}}},yrVV:function(e,t){},zSUU:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:[{"display-none":!e.isToastShow&&!e.isLoading},{"display-show":e.isToastShow||e.isLoading}]},[s("div",{staticClass:"weui-mask_transparent"}),e._v(" "),s("div",{staticClass:"weui-toast"},[s("i",{staticClass:"weui-icon_toast",class:[{"weui-icon-warn":!e.isLoading},{"weui-loading":e.isLoading}]}),e._v(" "),s("p",{staticClass:"weui-toast__content"},[e._v(e._s(e.isLoading?"数据加载中":e.toastContent))])])])},n=[],i={render:a,staticRenderFns:n};t.a=i}},["NHnr"]);
//# sourceMappingURL=app.1942f676a57b47a77d68.js.map
