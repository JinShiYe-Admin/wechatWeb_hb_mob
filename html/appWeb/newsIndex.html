<!DOCTYPE html>
<html>

	<head>
		<title>新闻</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="../../css/weui.css">
		<link rel="stylesheet" href="../../css/jquery-weui.css">
		<link rel="stylesheet" href="../../css/demos.css">
	</head>

	<body ontouchstart>
		<div class="weui-tab">
			<div class="weui-navbar" id="column">
				<a class="weui-navbar__item weui-bar__item--on" v-for="(item,index) in items" @click="clickCulumn(item)" href="#item.chnid">
					{{item.cname}}
				</a>
			</div>
			<div class="weui-tab__bd">
				<div id="tab4" class="weui-tab__bd-item weui-tab__bd-item--active">
					<h1>页面一</h1>
				</div>
			</div>
			<div class="weui-tabbar">
				<a href="" class="weui-tabbar__item weui-bar__item--on">
					<!--<span class="weui-badge" style="position: absolute;top: -.4em;right: 1em;">8</span>-->
					<div class="weui-tabbar__icon">
						<img src="../../image/icon_tabbar.png" alt="">
					</div>
					<p class="weui-tabbar__label">新闻</p>
				</a>
				<a href="mineIndex.html" class="weui-tabbar__item">
					<div class="weui-tabbar__icon">
						<img src="../../image/icon_tabbar.png" alt="">
					</div>
					<p class="weui-tabbar__label">我的</p>
				</a>
			</div>
		</div>

		<script src="../../js/jquery.min.js"></script>
		<script src="../../js/jquery-weui.js"></script>
		<script src="../../js/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var newsColumn = []; //存储所有的栏目
			var column = new Vue({
				el: '#column',
				data: {
					items: [] //列表信息流数据
				},
				methods: {
					clickCulumn: function(model) {
						alert('model:' + JSON.stringify(model));
					}
				}
			});
			window.onload = function() {
				//获取所有的栏目
				getSumColumn();
			};
			//获取所有的栏目
			function getSumColumn() {
				//				alert('开始发送获取栏目协议');
				var dt = [{
					cname: '111',
					linkurl: '../../image/icon_tabbar.png',
					newsPage:1,//获取新闻的页码
					newsFlag:0,//0刷新，1加载更多
					newsArray: [{
						newsid: 1,//文章ID
						chnid: 1,//栏目ID
						topic: '我的标题', //文章标题
						subtopic: '我是副标题', //文章副标题
						summas: '我是摘要', //摘要
						content: '我是正文', //正文
						recuser: 2, //投稿者ID
						rectname: '投稿者姓名', //投稿者姓名
						rectime: '2017-07-12', //填写时间
						stat: 1, //状态
						clicked: 222, //点击率
						isquo: 1, //是否为引用
						quourl: 'www.baidu.com', //引用链接
						isreply: 1, //是否允许评论
						isenc: 1, //是否有附件
						imgurl: '../../image/icon_tabbar.png' //缩略图url
					},{
						newsid: 2,//文章ID
						chnid: 1,//栏目ID
						topic: '我的标题2', //文章标题
						subtopic: '我是副标题2', //文章副标题
						summas: '我是摘要2', //摘要
						content: '我是正文2', //正文
						recuser: 2, //投稿者ID
						rectname: '投稿者姓名2', //投稿者姓名
						rectime: '2017-07-11', //填写时间
						stat: 1, //状态
						clicked: 222, //点击率
						isquo: 1, //是否为引用
						quourl: 'www.baidu.com', //引用链接
						isreply: 1, //是否允许评论
						isenc: 1, //是否有附件
						imgurl: '../../image/icon_tabbar.png' //缩略图url
					}]
				}, {
					cname: '222',
					linkurl: '../../image/icon_tabbar.png',
					newsPage:1,//获取新闻的页码
					newsFlag:0,//0刷新，1加载更多
					newsArray: [{
						newsid: 3,//文章ID
						chnid: 2,//栏目ID
						topic: '我的标题3', //文章标题
						subtopic: '我是副标题3', //文章副标题
						summas: '我是摘要3', //摘要
						content: '我是正文3', //正文
						recuser: 2, //投稿者ID
						rectname: '投稿者姓名', //投稿者姓名
						rectime: '2017-07-12', //填写时间
						stat: 1, //状态
						clicked: 222, //点击率
						isquo: 1, //是否为引用
						quourl: 'www.baidu.com', //引用链接
						isreply: 1, //是否允许评论
						isenc: 1, //是否有附件
						imgurl: '../../image/icon_tabbar.png' //缩略图url
					}]
				}];
				column.items = dt;
				//				var tempData = {
				//					cmd: 'chn', //网站栏目
				//					type: 'findpage', //分页查找栏目列表
				//					pagesize: 999, //每页条数
				//					pageindex: 1 //页码
				//				}
				//				unitWebsitePro(tempData, function(data) {
				//					if(data.RspCode == 0) {
				//						//判断是刷新0，还是加载更多1
				//						newsColumn = data.RspData.dt;
				//						if(newsColumn.length > 0) {
				//							column.items = data.RspData.dt;
				//						} else {
				//							alert('暂时还没有栏目');
				//						}
				//					} else {
				//						alert(data.RspTxt);
				//					}
				//				});
			};
			//获取栏目对应的新闻
			function getNewsList(columnModel) {
				//				var tempData = {
				//					cmd: 'news', //文章管理
				//					type: 'findpage', //分页查找文章列表
				//					pagesize: '10', //每页条数
				//					pageindex: columnModel.newsPage,//页码
				//					chnid: columnModel.chnid //某个栏目下的文章，栏目id
				//				}
				//				unitWebsitePro(tempData, function(data) {
				//					if(data.RspCode == 0) {
				//						if(data.RspData.dt.length > 0) {
				//							//判断是刷新0，还是加载更多1
				//							if(newsFlag == 0) {
				//								news.items = data.RspData.dt;
				//							} else {
				//								news.items = news.items.concat(data.RspData.dt);
				//							}
				//						}
				//						newsPage++;
				//					} else {
				//						alert(data.RspTxt);
				//					}
				//				});
			}
		</script>
	</body>

</html>