<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<title>班级圈</title>
		<script type="text/javascript">
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/weui.min.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/jquery-weui.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/demos.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../css/utils/iconfont.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../css/classCircle/class_circle_home.css?' + Math.random() + '" />');
		</script>
		<script>
			//动态设置样式
			(function() {
				var wsWidth = window.screen.width;
				var relate_praise_name = wsWidth - 30 - 40 - 15 - 5 - 5 - 48; //与我相关的人的名称的宽度(赞了我)
				var relate_comment_name = wsWidth - 30 - 40 - 15 - 5 - 5 - 64 - 10 - 32; //与我相关的人的名称的宽度(评论了我)
				var style = document.createElement("style");
				style.type = "text/css";
				var sstr_0 = ".relate-reply-type-praise .relate-name{max-width: " + relate_praise_name + "px;}";
				var sstr_1 = ".relate-reply-type-comment .relate-name{max-width: " + relate_comment_name + "px;}";
				style.innerHTML = sstr_0 + sstr_1;
				document.getElementsByTagName('head').item(0).appendChild(style);
			})();
		</script>
	</head>

	<body>
		<!--班级圈路由-->
		<div id="class_circle_app">
			<router-view></router-view>
		</div>
		<!--路由--班级圈主页-->
		<template id="temp_class_circle_home">
			<div>
				<div class="weui-tab">
					<div class="weui-navbar">
						<home-navbar-item v-for="(value,index) in home_tab" :key="index" :value="value" :index="index" :is_on="is_on" @click-item="clickItem"></home-navbar-item>
					</div>
					<div class="weui-tab__bd">
						<home-bd-item v-for="(value,index) in home_tab" :key="index" :value="value" :index="index" :is_on="is_on"></home-bd-item>
					</div>
				</div>
				<router-link to="/add" class="class-circle-report">+ 发表动态</router-link>
			</div>
		</template>
		<!--路由--发布动态-->
		<template id="temp_add_trends">
			<add-trends :content="content" @add-media="addMedia" @commit="commit" @content-change="contentChange"></add-trends>
		</template>
		<!--路由--动态详情-->
		<template id="temp_trends_details">
			<trends-item></trends-item>
		</template>
		<!--班级圈主页--顶部导航-->
		<template id="temp_trends_navbar_item">
			<div class="weui-navbar__item" :class="isOnClass" @click="click(index)">
				<div>{{value.title}}</div>
			</div>
		</template>
		<!--班级圈主页--底部内容-->
		<template id="temp_trends_tab_bd_item">
			<div :id="value.id" class="weui-tab__bd-item weui-pull-to-refresh" :class="isOnClass">
				<div class="weui-pull-to-refresh__layer">
					<div class="weui-pull-to-refresh__arrow"></div>
					<div class="weui-pull-to-refresh__preloader"></div>
					<div class="down">下拉刷新</div>
					<div class="up">释放刷新</div>
					<div class="refresh">正在刷新</div>
				</div>
				<div class="weui-panel weui-panel_access">
					<div class="weui-panel__bd">
						<template v-if="value.id=='relate_to_me'">
							<relate-item v-for="(item_value,item_index) in value.data" :key="index" :value="item_value"></relate-item>
						</template>
						<template v-else>
							<trends-item v-for="(item_value,item_index) in value.data" :key="index" :value="item_value"></trends-item>
						</template>
					</div>
				</div>
				<div :id="'loadmore_' + value.id" class="weui-loadmore" v-show="value.show_loadmore">
					<i class="weui-loading"></i>
					<span class="weui-loadmore__tips">正在加载</span>
				</div>
			</div>
		</template>
		<!--动态模版-->
		<template id="template_trends">
			<div class="weui-media-box">
				<div class="weui-media-box_appmsg">
					<div class="weui-media-box__hd class-circle-headimage-hd">
						<img class="weui-media-box__thumb class-circle-headimage" :src="PublisherImage" />
					</div>
					<div class="weui-media-box__bd">
						<div class="class-circle-title">
							<div class="weui-media-box__title">{{value.PublisherId|userName}}</div>
							<!--<div class="class-circle-mark"></div>-->
						</div>
						<div class="weui-media-box__desc">{{value.PublishDate}}</div>
					</div>
				</div>
				<div class="class-circle-content-limit">{{value.MsgContent}}</div>
				<!--<div class="class-circle-show-all">展开全部</div>-->
				<template v-if="value.EncType == 1">
					<template v-if="value.EncImgAddr_array.length == 1">
						<img class="class-circle-content-img" :src="value.EncImgAddr_array[0]" />
					</template>
					<div v-else-if="value.EncImgAddr_array.length > 1" v-for="(img_value,img_item) in value.EncImgAddr_array" class="class-circle-grids">
						<div class="class-circle-grids-item">
							<img :src="img_value" />
						</div>
					</div>
				</template>
				<div class="class-circle-function">
					<div class="class-circle-views">浏览数 {{value.ReadCnt}}</div>
					<div class="iconfont icon-trash"></div>
					<div class="iconfont icon-newmessage"></div>
					<div class="iconfont icon-dianzan" :class="{'trends-praise': value.IsLike}"></div>
				</div>
				<div class="class-circle-praise-comment" v-if="showPraiseComment">
					<div class="class-circle-triangle"></div>
					<div class="class-circle-praise-bg" v-for="(praise_value,praise_index) in value.LikeUsers">
						<div class="class-circle-praiser">{{praise_value.name}}</div>
					</div>
					<div class="class-circle-praise-comment-line" v-if="showLine"></div>
					<comments-item :value="value.Comments"></comments-item>
				</div>
			</div>
		</template>
		<!--与我相关模板-->
		<template id="temp_relate_to_me">
			<div class="weui-media-box relate-reply-type-praise">
				<div class="weui-media-box_appmsg">
					<div class="weui-media-box__hd class-circle-headimage-hd">
						<img class="weui-media-box__thumb class-circle-headimage" src="../../image/config/func_actssm.jpg" />
					</div>
					<div class="weui-media-box__bd">
						<div class="class-circle-title">
							<div class="weui-media-box__title relate-name">
								标题一标题一标题一标
							</div>
							<div class="relate-reply-type">赞了我</div>
						</div>
						<div class="weui-media-box__desc">2017-8-14 09:14:42</div>
					</div>
				</div>
				<div class="relate-reply-content">
					<div class="relate-reply-content-img">
						<img src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2760619582,1034521198&fm=11&gp=0.jpg" />
					</div>
					<div class="relate-reply-content-text">
						<div class="relate-reply-content-limit">
							<div class="relate-reply-content-name">
								张一二三四五六七八九十云张一二三四五六七八九十云
							</div>
							：一二三四五六七八九十一二三四五六七八九十
						</div>
					</div>
				</div>
			</div>
		</template>
		<!--与我相关模板-->
		<template id="temp_relate_to_me_comment">
			<div class="weui-media-box relate-reply-type-comment">
				<div class="weui-media-box_appmsg">
					<div class="weui-media-box__hd class-circle-headimage-hd">
						<img class="weui-media-box__thumb class-circle-headimage" src="../../image/config/func_actssm.jpg" />
					</div>
					<div class="weui-media-box__bd">
						<div class="class-circle-title">
							<div class="weui-media-box__title relate-name">
								标题一标题一标一标
							</div>
							<div class="relate-reply-type">评论了我</div>
							<div class="relate-reply">回复</div>
						</div>
						<div class="weui-media-box__desc">2017-8-14 09:14:42</div>
					</div>
				</div>
				<div>一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十</div>
				<div class="relate-reply-content">
					<div class="relate-reply-content-img">
						<img src="http://www.w3school.com.cn/i/bg_flower_small.gif" />
					</div>
					<div class="relate-reply-content-text">
						<div class="relate-reply-content-limit">
							<div class="relate-reply-content-name">
								张一
							</div>
							：一二三四五六七八九十一二三四五六七八九十
						</div>
					</div>
				</div>
				<div class="class-circle-comment-bg">
					<div class="class-circle-comment-item">
						<div class="class-circle-comment-name">壹</div>
						<div class="class-circle-comment-content">：一二三四 </div>
					</div>
					<div class="class-circle-comment-item">
						<div class="class-circle-comment-name">贰</div>
						<div class="class-circle-comment-content">回复</div>
						<div class="class-circle-comment-name">壹</div>
						<div class="class-circle-comment-content">：一二三四五六七八九十</div>
					</div>
				</div>
			</div>
		</template>
		<!--评论组件-->
		<template id="temp_comments">
			<div class="class-circle-comment-bg">
				<div v-for="(comment_value,comment_index) in value">
					<div class="class-circle-comment-item">
						<div class="class-circle-comment-name">{{comment_value.UserId|userName}}</div>
						<div class="class-circle-comment-content">：{{comment_value.CommentContent}}</div>
					</div>
					<div class="class-circle-comment-item" v-for="(replys_value,replys_index) in comment_value.Replys">
						<div class="class-circle-comment-name">{{replys_value.ReplyId|userName}}</div>
						<div class="class-circle-comment-content">回复</div>
						<div class="class-circle-comment-name">{{replys_value.UserId|userName}}</div>
						<div class="class-circle-comment-content">：{{replys_value.CommentContent}}</div>
					</div>
				</div>
			</div>
		</template>
		<!--发布动态组件-->
		<template id="temp_add_trends_com">
			<div class="class-circle-add">
				<textarea class="weui-textarea" v-model="com_content" placeholder="请输入内容" rows="6" maxlength="6000"></textarea>
				<div class="class-circle-add-media">
					<div class="iconfont icon-tuku" @click="addMedia(0)"></div>
					<div class="iconfont icon-xiangji2" @click="addMedia(1)"></div>
				</div>
				<button class="weui-btn weui-btn_primary" @click="commit">提交</button>
			</div>
		</template>

		<script type="text/javascript">
			document.write("<s" + "cript type='text/javascript' src='../../js/importJS.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/demoCssJs/jquery-2.1.4.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/demoCssJs/jquery-weui.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/demoCssJs/swiper.js?" + Math.random() + "'></s" + "cript>");
			//			document.write("<s" + "cript type='text/javascript' src='../../js/weui.min.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/vue.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/vue-router.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/lib/vconsole/vconsole.min.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/utils/utils.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/classCircle/class_circle_protocol.js?" + Math.random() + "'></s" + "cript>");
			document.write("<s" + "cript type='text/javascript' src='../../js/classCircle/class_circle_home.js?" + Math.random() + "'></s" + "cript>");
		</script>
	</body>

</html>