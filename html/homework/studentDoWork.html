<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>做作业</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript">
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/weui.min.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/jquery-weui.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../js/demoCssJs/demos.css?' + Math.random() + '" />');
			document.write('<link rel="stylesheet" href="../../css/utils/iconfont.css?' + Math.random() + '" />');
			//			document.write('<link rel="stylesheet" href="../../css/classCircle/class_circle_home.css?' + Math.random() + '" />');
		</script>
	</head>

	<body>
		<textarea name="MSG" cols=0 rows=4 placeholder="根据老师的要求来完成作业吧"></textarea>
		<div class="weui-cells weui-cells_form" id="tempVue">
			<div class="weui-cell">
				<div class="weui-cell__bd">
					<div class="weui-uploader">
						<div class="weui-uploader__hd">
							<p class="weui-uploader__title">上传照片</p>
							<div class="weui-uploader__info">0/1</div>
						</div>
						<div class="weui-uploader__bd">
							<ul class="weui-uploader__files" id="uploaderFiles">
								<!--<li class="weui-uploader__file weui-uploader__file_status" style="background-image:url(./images/pic_160.png)">
									<div class="weui-uploader__file-content">50%</div>
								</li>-->
							</ul>
							<div class="weui-uploader__input-box">
								<input id="uploaderInput" class="weui-uploader__input" type="file" accept="image/*" v-on:change="selectFile($event)">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
		<script src="../../js/demoCssJs/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/appweb/choose-file.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/utils/compress.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/demoCssJs/jquery-2.1.4.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/demoCssJs/jquery-weui.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/utils/consts.js"></script>
		<script src="../../js/utils/events.js"></script>
		<script type="text/javascript">
			mui.init();
			var tempVue = new Vue({
				el: '#tempVue',
				data: {

				},
				methods: {
					selectFile: function(event) {
						var com = this;
						console.log('111111');

						//						var file = event.target.files[0];
						//						if(window.FileReader) {
						//							var reader = new FileReader();
						//							reader.readAsDataURL(file);
						//							//监听文件读取结束后事件    
						//							reader.onloadend = function(e) {
						//								$(".img").attr("src", e.target.result); //e.target.result就是最后的路径地址
						//								console.log('path:'+e.target.result);
						//								console.log('path,value:'+e.target.value);
						//								compress.uploadImg(e.target.result, 2, function(response) {
						//														console.log("已上傳的文件！" + JSON.stringify(response))
						//														alert('12112:' + response.RspCode);
						//														if(response.RspCode == 0) {
						//															com.uploadedFiles = [response.RspData];
						//						
						//															com.$emit('uploadFile', response.RspData);
						//														} else {
						//															console.log("发生错误！" + JSON.stringify(response));
						//														}
						//													});
						//							};
						//						}

						if(event.target.value) {
							console.log("选中的文件路径：" + event.target.value);
							alert('wenjian:' + event.target.value);
							console.log(JSON.stringify(event.target.files));
							var file = event.target.files[0];
							compress.uploadImg(file, 2, function(response) {
								console.log("已上傳的文件！" + JSON.stringify(response))
								alert('12112:' + response.RspCode);
								if(response.RspCode == 0) {
									com.uploadedFiles = [response.RspData];

									com.$emit('uploadFile', response.RspData);
								} else {
									console.log("发生错误！" + JSON.stringify(response));
								}
							});
						}
					}
				}
			});
		</script>
	</body>

</html>